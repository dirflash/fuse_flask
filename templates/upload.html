{% extends "base.html" %} {% block title %}Fuse - Upload{% endblock %} {% block content %}

<h1 class="is-size-3-mobile is-size-1-desktop title">Upload a File</h1>

{% if error %}
<section class="section">
<p style="color: red">{{ error }}</p>
{% endif %} {% if message %}
<div class="notification is-success is-light">
  <button class="delete"></button>
  <span class="is-size-4">{{ message }}</span>
</div>
</section>
{% endif %}


<section class="section">
  <div class="container">
    <div class="columns is-multiline">
      <div class="column is-align-items-start">
        {% if filename %}
        <div class="file-info">
          <p class="has-text-weight-bold">File Name: <span class="has-text-info">{{ filename }}</span></p>
          <p class="has-text-weight-bold">File Size: <span class="has-text-info">{{ file_size }} bytes</span></p>
          <p class="has-text-weight-bold">Upload Time: <span class="has-text-info">{{ upload_time }} seconds</span></p>
        </div>
        {% else %}
        <p class="has-text-grey-light">No file uploaded yet.</p>
        {% endif %}
      </div>
      <div class="column is-align-items-start">
        <div class="field">
          <form 
            id="csv_upload_form" 
            enctype="multipart/form-data" 
            action="/upload" 
            method="post"
          >
            <div class="form-container mt-0">
              <div class="form-group">
                <div class="file is-warning is-centered">
                  <label class="file-label">
                    <input class="file-input" type="file" name="fuse_file" id="fuse_file" />
                    <span class="file-cta">
                      <span class="file-icon">
                        <i class="fas fa-upload"></i>
                      </span>
                      <span class="file-label"> Choose a file... </span>
                    </span>
                    <span class="file-name" id="file_name_display"> No file uploaded </span>
                  </label>
                </div>
                <div class="buttons has-addons is-centered" style="margin-top: 1rem;">
                  <button type="submit" id="upload_button" class="button is-warning">Upload</button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="column is-align-items-start is-flex is-flex-direction-column full-height-column">
        {% if data %}
          <div class="table-container is-flex-grow-1">{{ data|safe }}</div>
        {% else %}
          <p class="has-text-grey-light">No data to display.</p>
        {% endif %}
      </div>
    </div>
</section>
{% endblock %}
